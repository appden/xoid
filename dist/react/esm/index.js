import{useSyncExternalStore as r}from"use-sync-external-store/shim";import{useMemo as n,useDebugValue as t,useEffect as u,useLayoutEffect as o,useRef as e}from"react";import{create as i}from"xoid";import{createReadable as c,META as f,createCleanup as a}from"@xoid/engine";var m=void 0===window?u:o,p=function(r){var n=e();return n.current||(n.current={c:r()}),n.current.c};function v(u,o){var e=n((function(){return c(u,o)}),[u,o]),i=r(e[f].notifier.subscribe,e,e);return t(i),i}function s(r,n){var t=p((function(){return i((function(){return n}))}));m((function(){return t((function(){return n}))}),[n]);var u=function(){var r=p(a),n=r.onCleanup,t=r.cleanupAll;return m((function(){return t}),[]),n}();return p((function(){return r(t,u)}))}export{v as useAtom,s as useSetup};
