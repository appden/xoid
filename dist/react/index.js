"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("use-sync-external-store/shim"),r=require("react"),n=require("xoid"),u=require("@xoid/engine"),t=void 0===window?r.useEffect:r.useLayoutEffect,c=function(e){var n=r.useRef();return n.current||(n.current={c:e()}),n.current.c};exports.useAtom=function(n,t){var c=r.useMemo((function(){return u.createReadable(n,t)}),[n,t]),o=e.useSyncExternalStore(c[u.META].notifier.subscribe,c,c);return r.useDebugValue(o),o},exports.useSetup=function(e,r){var o=c((function(){return n.create((function(){return r}))}));t((function(){return o((function(){return r}))}),[r]);var i=function(){var e=c(u.createCleanup),r=e.onCleanup,n=e.cleanupAll;return t((function(){return n}),[]),r}();return c((function(){return e(o,i)}))};
